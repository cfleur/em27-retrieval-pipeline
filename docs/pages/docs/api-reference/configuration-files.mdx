import {
    ConfigSchema,
    ManualQueueSchema,
} from '../../../components/schema-renderers';

# Configuration Files

## How to configure the pipeline

The files `config.json` and `manual-queue.json` are used to configure the whole pipeline. They are place inside the `config` directory, alonside with two template files that can be used to create new configuration files. The `manual_queue.json` files doesn't have to exist, but the `config.json` is required.

```
üìÅ config
‚îú‚îÄ‚îÄ üìÑ config.json
‚îú‚îÄ‚îÄ üìÑ config.template.json
‚îú‚îÄ‚îÄ üìÑ manual-queue.json
‚îî‚îÄ‚îÄ üìÑ manual-queue.template.json
```

Below you can find example files and the schema definitions for both files.This website is synced to the validation used by the pipeline internally and you will get a presize error message if you violate the schema of the respective file.

## `config.json`

### Example File

```json
{
    "general": {
        "location_data": {
            "github_repository": "tum-esm/em27-location-data",
            "access_token": null
        },
        "data_src_dirs": {
            "datalogger": "path-to-datalogger-datalogger-upload-directory",
            "vertical_profiles": "path-to-vertical-profiles",
            "interferograms": "path-to-datalogger-ifg-upload-directory"
        },
        "data_dst_dirs": {
            "results": "path-to-results-storage"
        }
    },
    "vertical_profiles": {
        "ftp_server": {
            "email": "...@...",
            "max_day_delay": 7,
            "upload_sleep": 60,
            "upload_timeout": 180,
            "download_sleep": 60,
            "download_timeout": 600
        },
        "request_scope": {
            "from_date": "20220101",
            "to_date": "20220105",
            "data_types": ["GGG2014", "GGG2020"]
        }
    },
    "automated_proffast": {
        "general": {
            "max_core_count": 9,
            "ifg_file_regex": "^$(SENSOR_ID)$(DATE).*\\.\\d+$"
        },
        "data_sources": {
            "storage": true,
            "manual_queue": true
        },
        "modified_ifg_file_permissions": {
            "during_processing": null,
            "after_processing": null
        },
        "storage_data_filter": {
            "sensor_ids_to_consider": ["ma", "mb", "mc", "md", "me"],
            "from_date": "20190101",
            "to_date": "20991231",
            "min_days_delay": 5
        }
    },
    "output_merging_targets": [
        {
            "campaign_id": "muccnet",
            "data_types": [
                "gnd_p",
                "gnd_t",
                "app_sza",
                "azimuth",
                "xh2o",
                "xair",
                "xco2",
                "xch4",
                "xco",
                "xch4_s5p"
            ],
            "sampling_rate": "1m",
            "max_interpolation_gap_seconds": 180,
            "dst_dir": "path-to-merged-output"
        }
    ]
}
```

### Schema definition

<ConfigSchema />

## `manual-queue.json`

### Example File

```json
[
    { "sensor_id": "ma", "date": "20220101", "priority": 10 },
    { "sensor_id": "mb", "date": "20220101", "priority": 9 },
    { "sensor_id": "mc", "date": "20220101", "priority": -10 }
]
```

### Schema definition

<ManualQueueSchema />
