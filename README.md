# Download Pressure Map Files from Caltech

## Project Setup

Dependency management with poetry: https://python-poetry.org/docs/#installation

Set up project interpreter:

```bash
# Create virtual environment (a local copy of python)
python3.9 -m venv venv

# Activate virtual environment
source venv/bin/activate

# Install dependencies
poetry install
```

<br/>
<br/>

## What the script does

1. Load the config from the `config.json` file. Write the dates and
   the location to download in here:

    ```json
    {
        "LAT": -48.151,
        "LNG": -11.569,
        "DATES": ["20210525", "20210527"],
        "USER": "someone@tum.de",
        "DST": "/home/esm/<directory-for-the-map-files>"
    }
    ```

2. Generate an `input_file.txt` (only exists temporarily) which
   describes the request

3. Execute `upload_request.sh` which will upload this request to
   `ccycle.gps.caltech.edu`

4. Download the compressed result via `ftp` from `ccycle.gps.caltech.edu`

5. Extract the map file from the result and move it to `mapFiles/`

<br/>

**Request will be cached in the `cache/` directory. Please**
**do not remove or empty this directory.**

<br/>
<br/>

## Project Structure

The directories `archive/firstVersion` and `archive/secondVersion` contain old/different
versions of this download script.

`pyproject.toml` contains information about this project as well as all of
its dependencies.

`peotry.lock` is an autogenerated file and makes sure that every system using
the `poetry install` command has exactly the same versions of all packages
installed.

You have to create a `config.json` file, structured like the example above. The
Code uses the config file in the project directory (same level as `run.py`) no
matter from where it is called.
